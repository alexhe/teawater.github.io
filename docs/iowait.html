<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 5.3.7.2 (MacOSX)"/>
	<meta name="created" content="2018-01-08T20:03:10.655128588"/>
	<meta name="changed" content="2018-01-08T20:04:01.650425703"/>
	<style type="text/css">
		@page { margin: 2cm }
		p { margin-bottom: 0.25cm; line-height: 120% }
		pre.cjk { font-family: "Courier New", monospace }
		h1 { margin-bottom: 0.21cm }
		h1.western { font-family: "Liberation Serif", serif }
		h1.cjk { font-family: "Arial Unicode MS"; font-size: 24pt }
		h1.ctl { font-family: "Arial Unicode MS"; font-size: 24pt }
		a:link { so-language: zxx }
		code.cjk { font-family: "Courier New", monospace }
	</style>
</head>
<body lang="zh-CN" dir="ltr">
<h1 class="cjk" style="margin-top: 0cm; margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="Liberation Serif, serif"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 15pt"><span style="font-style: normal"><b>Linux
Kernel iowait </b></span></font></font></span></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 15pt"><span style="font-style: normal"><b>时间的代码原理</b></span></font></font></font></h1>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0.46cm; orphans: 2; widows: 2"><br/>
<br/>

</p>
<p style="margin-bottom: 0.46cm; orphans: 2; widows: 2"><span style="font-variant: normal"><font color="#333333"><span style="letter-spacing: normal"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">原文链接：</span></span></font></font></span></font></span><span style="display: inline-block; border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0cm; padding-right: 0cm"><span style="font-variant: normal"><font color="#225599"><span style="text-decoration: none"><span style="letter-spacing: normal"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal"><a href="http://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/LTIJliTZPB-fJXHMki48Iw" target="_blank">朱辉</span></span></font></font></span></span></font></span><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><span style="font-variant: normal"><font color="#225599"><span style="text-decoration: none"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></span></font></font></span></font></span></span></font></font><span style="font-variant: normal"><font color="#225599"><span style="text-decoration: none"><span style="letter-spacing: normal"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">茶水</span></span></font></font></span></span></font></span><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><span style="font-variant: normal"><font color="#225599"><span style="text-decoration: none"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">)</span></span></span></font></font></span></font></span></span></font></font><span style="font-variant: normal"><font color="#225599"><span style="text-decoration: none"><span style="letter-spacing: normal"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">：
</span></span></font></font></span></span></font></span><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><span style="font-variant: normal"><font color="#225599"><span style="text-decoration: none"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">Linux
Kernel iowait </span></span></span></font></font></span></font></span></span></font></font><span style="font-variant: normal"><font color="#225599"><span style="text-decoration: none"><span style="letter-spacing: normal"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">时间的代码原理</span></span></span></font></font></span></span></font></span></a></p>
<hr/>

<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt">更新记录</font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">2017.12.15</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">：</span></span></font></font></font></p>
<ul>
	<li/>
<p style="margin-top: 0.23cm; border: none; padding: 0cm; font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2">
	<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt">对扩展文章的问题描述进行了精确化。</font></font></font></p>
</ul>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">2017.12.10</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">：</span></span></font></font></font></p>
<ul>
	<li/>
<p style="margin-top: 0.23cm; border: none; padding: 0cm; font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2">
	<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt">根据张骁和宋宝华老师的建议，将结尾的错误进行了修正。</font></font></font></p>
	<li/>
<p style="margin-top: 0.23cm; border: none; padding: 0cm; font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2">
	<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt">增加一篇扩展阅读。</font></font></font></p>
	<li/>
<p style="margin-top: 0.23cm; border: none; padding: 0cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
	<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">增加了对</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">CPU</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">负载均衡问题的讲解。</span></span></font></font></font></p>
</ul>
<hr/>

<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">之前在我热爱的公众号</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">Linuxer</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">看到
</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">The
precise meaning of I/O wait time in Linux
</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">这篇文章，感觉写的不错，就是没有落实到源码上感觉稍微有点晦涩，于是自己读了一下代码。</span></span></font></font></font></p>
<hr/>

<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">当</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">发生</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的时候，内核对他们的处理方法是将</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">切换出去，让可运行的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">先运行，而在切换出去前，会将其</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">in_iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">设置为</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">1</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，再次被唤醒的时候</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">in_iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">被设置为原值。相关函数</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">io_schedule</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">io_schedule_timeout</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">mutex_lock_io</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">mutex_lock_io_nested</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">由此可见</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">in_iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">表明了这个</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">是否在</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">另外要注意的是，这几个切换函数除了</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">mutex_lock_io</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">mutex_lock_io_nested</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">会设置</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">运行状态为</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">TASK_UNINTERRUPTIBLE</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">外，内核在调用</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">io_schedule</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">io_schedule_timeout</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">前都会设置</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">运行状态</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">TASK_UNINTERRUPTIBLE</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; orphans: 2; widows: 2"><br/>
<br/>

</p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">在进程切换函数</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">__schedule</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">在切换</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的时候，如果被切换出的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">in_iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">为真，则会对这个</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">CPU</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的运行队列</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">rq</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">结构中的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">nr_iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">加</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">1</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">因为前面对</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">已经被设置为</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">TASK_UNINTERRUPTIBLE</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，则</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">需要被唤醒，对</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">nr_iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的减少操作也是在</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">唤醒函数来做的。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">由此可见</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">nr_iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">可以表明某</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">CPU</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">上是否有</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">在</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，以及数量。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">因为处于</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">是</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">TASK_UNINTERRUPTIBLE</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">状态，其并不在就绪队列中，所以其也没有被</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">CPU</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">负载均衡到其他</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">CPU</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的可能，所以</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">nr_iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">也不需要处理负载均衡问题。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; orphans: 2; widows: 2"><br/>
<br/>

</p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">当累加系统</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">idle</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">时间的时候，如果</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">CPU</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">nr_iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">为真，也就是当前这个</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">cpu</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">有</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">在等待</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，则记录为</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">时间。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">在打开</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">NO_HZ</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的内核中，相关代码在</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">update_ts_time_stats</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">而没打开的则在
</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">account_idle_time</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; orphans: 2; widows: 2"><br/>
<br/>

</p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">当相关</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">/proc/stat</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">接口被访问时，</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">get_iowait_time</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">就会访问这个时间并返回。</span></span></font></font></font></p>
<hr/>

<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">综上所述，</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">时间就是</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">CPU
idle</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">时间，但是这时候</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">CPU</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">上不是完全没</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">TASK</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">需要运行，而是休眠的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">中有一个或者若干个是</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">当然</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">idle</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">和</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的时候</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">CPU</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">上还有</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">idle
task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。</span></span></font></font></font></p>
<hr/>

<p style="margin-bottom: 0.46cm; orphans: 2; widows: 2"><span style="font-variant: normal"><font color="#333333"><span style="letter-spacing: normal"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">最后推荐一篇阿里内核组的文章作为扩展阅读&nbsp;</span></span></font></font></span></font></span><span style="display: inline-block; border-top: none; border-bottom: 1px solid #000000; border-left: none; border-right: none; padding-top: 0cm; padding-bottom: 0.05cm; padding-left: 0cm; padding-right: 0cm"><font size="3" style="font-size: 12pt"><span lang="en-US"><a href="http://link.zhihu.com/?target=http%3A//kernel.taobao.org/index.php%3Ftitle%3DKernel_Documents/new_iowait_calculation" target="_blank"><span style="font-variant: normal"><font color="#225599"><span style="text-decoration: none"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal"><font face="Liberation Serif, serif">Kernel
Documents/new iowait calculation</span></span></span></span></font></font></span></font></span></a></span></font></font><span style="font-variant: normal"><font color="#333333"><span style="letter-spacing: normal"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。</span></span></font></font></span></font></span></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt">比较有意思是这里：</font></font></font></p>
<pre class="cjk" style="border: none; padding: 0cm; background: #f6f6f6"><span style="display: inline-block; border: none; padding: 0cm"><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">+       wait_event_interruptible_hrtimeout(ctx-&gt;wait,</span></span></font></font></code></span></font>
<span style="display: inline-block; border: none; padding: 0cm"><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">+                       aio_read_events(ctx, min_nr, nr, event, &amp;ret), until);</span></span></font></font></code></span></font></pre><p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">无论超时值</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">until</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">是什么值，都会调用</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">wait_event_interruptible_hrtimeout</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，虽然是</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">hrtimer</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">实时性已经很高，但是在用来实际处理</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">wait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的宏</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">__wait_event_hrtimeout</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">可以看到</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">hrtimer</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">初始化使用的是：</span></span></font></font></font></p>
<pre class="cjk" style="border: none; padding: 0cm; background: #f6f6f6"><span style="display: inline-block; border: none; padding: 0cm"><span style="background: #f6f6f6"><code class="cjk">                </span></code><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">hrtimer_start_range_ns(&amp;__t.timer, timeout,             \</span></span></font></font></code></span></font>
<span style="display: inline-block; border: none; padding: 0cm"><span style="background: #f6f6f6"><code class="cjk">                                       </span></code><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">current-&gt;timer_slack_ns,         \</span></span></font></font></code></span></font>
<span style="display: inline-block; border: none; padding: 0cm"><span style="background: #f6f6f6"><code class="cjk">                                       </span></code><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">HRTIMER_MODE_REL);               \</span></span></font></font></code></span></font></pre><p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">其中第三个参数</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">current-&gt;timer_slack_ns</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">是传递给</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">hrtimer</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的触发范围，因为</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">hrtimer</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">实时性高，但是频繁触发系统显然受不了，所以每次</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">hrtimer</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">触发都会将时间范围内的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">timer</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">都处理掉</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">见</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">__hrtimer_run_queues)</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。所以</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">timeout+current-&gt;timer_slack_ns</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">才是设置的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">hrtimer</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的最后触发时间，</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">current-&gt;timer_slack_ns</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的默认值是</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">50000</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，也就是代表</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">50000</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">纳秒。也就是这个时钟最久会在</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">50000</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">纳秒后触发，当然也可能被之前的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">hrtimer</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">触发。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">所以在</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">wait_event_interruptible_hrtimeout</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">中，一旦</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">ctx-&gt;wait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">未能就绪，即使设置超时时间为</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">0</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，也很可能要调用一次</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">schedule</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">，这导致</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">时间相差很大，也还很大幅度伤害了性能。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">而这个问题也被</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">5f785de588735306ec4d7c875caf9d28481c8b21</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">进行了修复，这段代码改成了：</span></span></font></font></font></p>
<pre class="cjk" style="border: none; padding: 0cm; background: #f6f6f6"><span style="display: inline-block; border: none; padding: 0cm"><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">-       wait_event_interruptible_hrtimeout(ctx-&gt;wait,</span></span></font></font></code></span></font>
<span style="display: inline-block; border: none; padding: 0cm"><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">-                       aio_read_events(ctx, min_nr, nr, event, &amp;ret), until);</span></span></font></font></code></span></font>
<span style="display: inline-block; border: none; padding: 0cm"><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">+       if (until.tv64 == 0)</span></span></font></font></code></span></font>
<span style="display: inline-block; border: none; padding: 0cm"><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">+               aio_read_events(ctx, min_nr, nr, event, &amp;ret);</span></span></font></font></code></span></font>
<span style="display: inline-block; border: none; padding: 0cm"><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">+       else</span></span></font></font></code></span></font>
<span style="display: inline-block; border: none; padding: 0cm"><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">+               wait_event_interruptible_hrtimeout(ctx-&gt;wait,</span></span></font></font></code></span></font>
<span style="display: inline-block; border: none; padding: 0cm"><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">+                               aio_read_events(ctx, min_nr, nr, event, &amp;ret),</span></span></font></font></code></span></font>
<span style="display: inline-block; border: none; padding: 0cm"><span lang="en-US"><code class="western"><font face="Menlo, Monaco, Consolas, Andale Mono, lucida console, Courier New, monospace"><font size="2" style="font-size: 9pt"><span style="background: #f6f6f6"><font face="Liberation Mono, monospace">+                               until);</span></span></font></font></code></span></font></pre><p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">从而在</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">until</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">为</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">0</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的时候，直接调用</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">aio_read_events</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">。应该就不会再有那么明显的</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">问题了，另外也因此这个修复让</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">io_getevents</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的调用得到了超过百倍的性能提升。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">当然这个</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">iowait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">不够精确的原因还是存在，一旦因为需要发生</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">task</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">切换，还是会有不够精确的问题。</span></span></font></font></font></p>
<p style="margin-bottom: 0.46cm; font-variant: normal; letter-spacing: normal; orphans: 2; widows: 2">
<font color="#333333"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">最后要吐槽一下</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">aio</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">的设计，都</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">aio</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">了还需要</span></span></font></font><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span lang="en-US"><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">wait</span></span></font></font></span></font></font><font face="apple-system, system-ui, Helvetica Neue, PingFang SC, Microsoft YaHei, Source Han Sans SC, Noto Sans CJK SC, WenQuanYi Micro Hei, sans-serif"><font size="4" style="font-size: 14pt"><span style="font-style: normal"><span style="font-weight: normal">吗？</span></span></font></font></font></p>
<p style="margin-bottom: 0cm; line-height: 100%"><br/>

</p>
</body>
</html>